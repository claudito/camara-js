<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
</head>
<body>
	

  <button  type="button" class="btn btn-success btn-round" id="capture">
    Capturar
  </button>
  <br>

  <div class="row">
    <div class="col-md-6">
      <label >Cámara:</label>
      <video id="player" width="320" autoplay height="240"></video>
    </div>
    <div class="col-md-6">
      <label >Imagen:</label>
      <canvas id="snapshot" width="320" height="240"></canvas>
    </div>
  </div>


<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
<script>
	

       //Camara
        var player         = document.getElementById('player'); 
        var snapshotCanvas = document.getElementById('snapshot');
        var captureButton  = document.getElementById('capture');

        var handleSuccess  = function(stream) {
          // Attach the video stream to the video element and autoplay.
          player.srcObject = stream;
        };

        captureButton.addEventListener('click', function() {

          var context = snapshot.getContext('2d');
          // Draw the video frame to the canvas.
          context.drawImage(player, 0, 0, snapshotCanvas.width, 
              snapshotCanvas.height);

        });

        //Activar Captura de Camara
       navigator.mediaDevices.getUserMedia({video: true}).then(handleSuccess);

        //Validación que el servicio este activo  
      navigator.mediaDevices.getUserMedia({video: true})
      .then(function(handleSuccess) {

      }).catch(function(err) {

        Swal.fire({

          title :'Activar Cámara',
          text  :'Debe Habilitar la cámara de su dispositivo para poder realizar una captura de imagen como evidencia de su marcación.',
          footer:'Nota:Verifique en la parte superior izquierda el candado de seguridad y active la cámara de su dispositivo.<br>Luego de activar la cámara actualice o refresque la página.',
          imageUrl:'https://e7.pngegg.com/pngimages/993/290/png-clipart-logo-graphy-encapsulated-postscript-camera-camera-photography-logo.png',
          showConfirmButton:false,
          allowOutsideClick:false


        });

      });



</script>
</body>
</html>
